<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>done?</title>
  <!-- PWA -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#000000">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="done?">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <!-- 1. 헤더 -->
  <header class="header">
    <div class="header-content">
      <div>
        <h1 class="app-title">done?</h1>
        <p class="streak-text" id="streak-text">0일 연속 달성 중 🔥</p>
      </div>
      <div class="header-right">
        <div class="points-display">
          <span class="points-label">P</span>
          <span class="points-value" id="total-points">0</span>
        </div>
        <a href="profile.html" class="profile-btn" title="프로필">👤</a>
      </div>
    </div>
  </header>

  <!-- 2. 탭 네비게이션 -->
  <nav class="tabs">
    <button class="tab active" data-tab="home">
      <span>홈</span>
    </button>
    <button class="tab" data-tab="calendar">
      <span>캘린더</span>
    </button>
    <button class="tab" data-tab="leaderboard">
      <span>순위</span>
    </button>
  </nav>

  <!-- 3. 콘텐츠 영역 -->
  <main class="content-wrapper">

    <!-- 홈 탭 - 오늘의 퀘스트 -->
    <div class="content active" id="home-content">
      <div class="today-header">
        <h2 class="content-title">오늘의 퀘스트</h2>
        <div class="progress-container">
          <div class="progress-bar">
            <div class="progress-fill" id="today-progress"></div>
          </div>
          <span class="progress-text" id="progress-text">0/0</span>
        </div>
      </div>
      <div class="quest-list" id="today-quest-list">
        <!-- 오늘의 퀘스트가 동적으로 추가됨 -->
      </div>
      <div class="empty-state hidden" id="today-empty">
        <p class="empty-state-icon">📝</p>
        <p class="empty-state-text">오늘의 퀘스트가 없습니다</p>
        <p class="empty-state-sub">+ 버튼을 눌러 추가해보세요</p>
      </div>
    </div>

    <!-- 캘린더 탭 -->
    <div class="content" id="calendar-content">
      <!-- 서브 탭 -->
      <div class="sub-tabs">
        <button class="sub-tab active" data-subtab="calendar-view">캘린더</button>
        <button class="sub-tab" data-subtab="quest-manage">퀘스트 관리</button>
      </div>

      <!-- 캘린더 보기 -->
      <div class="sub-content active" id="calendar-view">
        <div class="calendar-header">
          <h2 class="calendar-title" id="calendar-title">2026년 1월</h2>
          <div class="calendar-nav">
            <button class="calendar-nav-btn" id="prev-month">
              <span>‹</span>
            </button>
            <button class="calendar-nav-btn" id="next-month">
              <span>›</span>
            </button>
          </div>
        </div>

        <div class="calendar-container">
          <div class="calendar-weekdays">
            <div class="calendar-weekday">일</div>
            <div class="calendar-weekday">월</div>
            <div class="calendar-weekday">화</div>
            <div class="calendar-weekday">수</div>
            <div class="calendar-weekday">목</div>
            <div class="calendar-weekday">금</div>
            <div class="calendar-weekday">토</div>
          </div>
          <div class="calendar-grid" id="calendar-grid">
            <!-- 달력 날짜가 동적으로 추가됨 -->
          </div>
        </div>

        <div class="calendar-legend">
          <div class="legend-item">
            <div class="legend-icon legend-completed"></div>
            <span>모두 완료</span>
          </div>
          <div class="legend-item">
            <div class="legend-icon legend-partial"></div>
            <span>일부 완료</span>
          </div>
        </div>
      </div>

      <!-- 퀘스트 관리 -->
      <div class="sub-content" id="quest-manage">
        <div class="manage-section">
          <h3 class="manage-section-title">반복 퀘스트</h3>
          <div class="manage-list" id="repeat-quest-list">
            <!-- 반복 퀘스트 목록 -->
          </div>
          <div class="empty-state hidden" id="repeat-empty">
            <p class="empty-state-text">반복 퀘스트가 없습니다</p>
          </div>
        </div>

        <div class="manage-section">
          <h3 class="manage-section-title">일반 퀘스트</h3>
          <div class="manage-list" id="single-quest-list">
            <!-- 일반 퀘스트 목록 -->
          </div>
          <div class="empty-state hidden" id="single-empty">
            <p class="empty-state-text">일반 퀘스트가 없습니다</p>
          </div>
        </div>
      </div>
    </div>

    <!-- 리더보드 탭 (임시) -->
    <div class="content" id="leaderboard-content">
      <div class="today-header">
        <h2 class="content-title">순위</h2>
      </div>
      <div class="empty-state">
        <p class="empty-state-icon">🏆</p>
        <p class="empty-state-text">준비 중입니다</p>
      </div>
    </div>

  </main>

  <!-- 4. 플로팅 추가 버튼 -->
  <button class="fab" id="add-quest-btn">
    <span class="fab-icon">+</span>
  </button>

  <!-- 5. 퀘스트 추가 모달 -->
  <div class="modal" id="add-quest-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title">새 퀘스트</h2>
        <button class="modal-close" id="add-modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <!-- 퀘스트 타입 탭 -->
        <div class="quest-type-tabs">
          <button class="quest-type-tab active" data-type="single">일반</button>
          <button class="quest-type-tab" data-type="repeat">반복</button>
        </div>

        <div class="form-group">
          <label class="form-label" for="quest-title">퀘스트 이름</label>
          <input class="form-input" type="text" id="quest-title"
                 placeholder="예: 운동 30분 하기" maxlength="50">
        </div>
        <div class="form-group">
          <label class="form-label" for="quest-points">포인트</label>
          <input class="form-input" type="number" id="quest-points"
                 min="10" max="1000" step="10" value="20">
        </div>

        <!-- 일반 퀘스트: 날짜 선택 -->
        <div class="form-group" id="single-date-group">
          <label class="form-label" for="quest-date">날짜</label>
          <input class="form-input" type="date" id="quest-date" required>
        </div>

        <!-- 반복 퀘스트: 요일 선택 -->
        <div class="form-group hidden" id="repeat-days-group">
          <label class="form-label">반복 요일</label>
          <div class="weekday-selector">
            <label class="weekday-chip">
              <input type="checkbox" name="repeat-day" value="0">
              <span>일</span>
            </label>
            <label class="weekday-chip">
              <input type="checkbox" name="repeat-day" value="1">
              <span>월</span>
            </label>
            <label class="weekday-chip">
              <input type="checkbox" name="repeat-day" value="2">
              <span>화</span>
            </label>
            <label class="weekday-chip">
              <input type="checkbox" name="repeat-day" value="3">
              <span>수</span>
            </label>
            <label class="weekday-chip">
              <input type="checkbox" name="repeat-day" value="4">
              <span>목</span>
            </label>
            <label class="weekday-chip">
              <input type="checkbox" name="repeat-day" value="5">
              <span>금</span>
            </label>
            <label class="weekday-chip">
              <input type="checkbox" name="repeat-day" value="6">
              <span>토</span>
            </label>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" id="add-cancel-btn">취소</button>
        <button type="button" class="btn btn-primary" id="add-submit-btn">추가</button>
      </div>
    </div>
  </div>

  <!-- 6. 완료 인증 모달 -->
  <div class="modal" id="complete-quest-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title">퀘스트 완료</h2>
        <button class="modal-close" id="complete-modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <p class="complete-quest-name" id="complete-quest-title"></p>
        <p class="complete-quest-points" id="complete-quest-points"></p>

        <div class="image-upload-area" id="image-upload-area">
          <input type="file" id="quest-image" accept="image/*" style="display: none;">
          <div class="image-upload-icon">📷</div>
          <div class="image-upload-text">인증 사진 선택</div>
        </div>
        <div class="image-preview" id="image-preview"></div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="complete-cancel-btn">취소</button>
        <button class="btn btn-primary" id="complete-submit-btn">완료</button>
      </div>
    </div>
  </div>

  <!-- 7. 날짜별 상세 모달 -->
  <div class="modal" id="day-detail-modal">
    <div class="modal-content">
      <div class="modal-header">
        <div>
          <h2 class="modal-title" id="day-detail-title">2026년 1월 24일</h2>
          <p class="day-detail-summary" id="day-detail-summary">5개 완료 • 100 포인트</p>
        </div>
        <button class="modal-close" id="day-detail-close">&times;</button>
      </div>
      <div class="modal-body">
        <div class="day-detail-list" id="day-detail-list">
          <!-- 날짜별 완료 퀘스트 목록이 동적으로 추가됨 -->
        </div>
        <div class="empty-state hidden" id="day-detail-empty">
          <p class="empty-state-text">완료한 퀘스트가 없습니다</p>
        </div>
      </div>
    </div>
  </div>

  <!-- 모바일 디버깅 패널 (임시) -->
  <div id="debug-panel" style="position: fixed; bottom: 80px; left: 10px; right: 10px; background: rgba(0,0,0,0.8); color: #0f0; padding: 10px; border-radius: 8px; font-size: 12px; max-height: 150px; overflow-y: auto; z-index: 300; display: none; font-family: monospace;"></div>

  <script src="js/app.js"></script>
</body>
</html>
